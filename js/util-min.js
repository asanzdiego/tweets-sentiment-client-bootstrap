var util_ajaxGet=function(url,data,callback){console.log("GET to ",util_server_url+url);console.log("data=",data);$.ajax({type:"GET",url:util_server_url+url,data:data}).done(function(json,textStatus,jqXHR){console.log("json=",json);callback(json)}).fail(function(jqXHR,textStatus,error){console.log("error=",error);callback(error)})};var util_ajaxPost=function(url,data,callback){console.log("POST to ",util_server_url+url);console.log("data=",data);$.ajax({type:"POST",url:util_server_url+url,data:data}).done(function(json,textStatus,jqXHR){console.log("json=",json);callback(json)}).fail(function(jqXHR,textStatus,error){console.log("error=",error);callback(error)})};var util_ajaxPut=function(url,data,callback){console.log("PUT to ",util_server_url+url);console.log("data=",data);$.ajax({type:"PUT",url:util_server_url+url,data:data}).done(function(json,textStatus,jqXHR){console.log("json=",json);callback(json)}).fail(function(jqXHR,textStatus,error){console.log("error=",error);callback(error)})};var util_ajaxDelete=function(url,data,callback){console.log("DELETE to ",util_server_url+url);console.log("data=",data);$.ajax({type:"PUT",url:util_server_url+url,data:data}).done(function(json,textStatus,jqXHR){console.log("json=",json);callback(json)}).fail(function(jqXHR,textStatus,error){console.log("error=",error);callback(error)})};var util_getBootstrapEnvironment=function(){var envs=["xs","sm","md","lg"];$el=$("<div>");$el.appendTo($("body"));for(var i=envs.length-1;i>=0;i--){var env=envs[i];$el.addClass("hidden-"+env);if($el.is(":hidden")){$el.remove();return env}}};var util_dateFormat="DD/MM/YYYY HH:mm:ss";var util_dateFormatMini="YY.MM.DD-HH:mm";var util_maxGraphData=15;var util_numberRequestRetries=30;var util_eachGetRequestRetrie=10;var util_millBetweenRequestRetries=1e3;var util__dateToString=function(date,dateFormat){if(!date){return"--"}else{return moment(date).format(dateFormat)}};var util__stringToDate=function(string,dateFormat){if(!string){return""}else{return moment(string,dateFormat)}};var util_dateToString=function(date){return util__dateToString(date,util_dateFormat)};var util_stringToDate=function(string){return util__stringToDate(string,util_dateFormat)};var util_dateToStringMini=function(date){return util__dateToString(date,util_dateFormatMini)};var util_stringToDateMini=function(string){return util__stringToDate(string,util_dateFormatMini)};var util_server_url="http://tweetssentiment.herokuapp.com";var util_drawGraphic=function(canvasElement,labels,data){var dataMock=[];var dataMockMin=[];var dataMockMax=[];for(var i=0;i<data.length;i++){dataMock.push(0);dataMockMin.push(-100);dataMockMax.push(100)}var lineChartData={labels:labels,datasets:[{fillColor:"rgba(103,230,103,0.1)",strokeColor:"33FF33",pointColor:"33FF33",pointStrokeColor:"#fff",data:dataMockMax},{fillColor:"rgba(255,115,115,0.5)",strokeColor:"FF3333",pointColor:"FF3333",pointStrokeColor:"#fff",data:dataMock},{fillColor:"rgba(255,115,115,0.1)",strokeColor:"FF3333",pointColor:"FF3333",pointStrokeColor:"#fff",data:dataMockMin},{fillColor:"rgba(103,230,103,0.5)",strokeColor:"33FF33",pointColor:"33FF33",pointStrokeColor:"#fff",data:data}]};var options={pointDot:false};var myLine=new Chart(document.getElementById(canvasElement).getContext("2d")).Line(lineChartData,options)};if(typeof String.prototype.startsWith!="function"){String.prototype.startsWith=function(str){return this.indexOf(str)==0}}var util_random=function(min,max){return Math.floor(Math.random()*(max-min+1))+min};var util_urlParams={};(function(){var match,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))},query=window.location.search.substring(1);while(match=search.exec(query)){util_urlParams[decode(match[1])]=decode(match[2])}})();var util_updateProgessBar=function(element,retries,maxRetries){$(element).removeClass("hidden");$(element).show();var percentage=Math.floor((retries-1)*100/maxRetries);$("#progessbar").html('<div class="progress progress-bar-primary">'+'<div id="progessbar-percentage"'+'class="progress-bar progress-bar-primary" role="progressbar"'+'aria-valuenow="'+percentage+'" style="width: '+percentage+'%"'+'aria-valuemin="0" aria-valuemax="100">'+'<span id="progessbar-text">'+percentage+"% Complete</span>"+"</div>"+"</div>")};var util_scoreImageAndColor=function(score,scoreTag){var scoreIcon="glyphicon glyphicon-exclamation-sign";var scoreColor="999999";var scoreText="not analyzed";var scoreStars="- - - - -";var scoreClass="default";switch(scoreTag){case"P+":scoreIcon="glyphicon glyphicon-thumbs-up";scoreColor="468847";scoreText="very positive";scoreStars="★★★★★";scoreClass="success";break;case"P":scoreIcon="glyphicon glyphicon-thumbs-up";scoreColor="8fc38f";scoreText="positive";scoreStars="★★★★☆";scoreClass="primary";break;case"NEU":scoreIcon="glyphicon glyphicon-hand-right";scoreColor="c09853";scoreText="neutral";scoreStars="★★★☆☆";scoreClass="warning";break;case"N":scoreIcon="glyphicon glyphicon-thumbs-down";scoreColor="dc9492";scoreText="negative";scoreStars="★★☆☆☆";scoreClass="info";break;case"N+":scoreIcon="glyphicon glyphicon-thumbs-down";scoreColor="b94a48";scoreText="very negative";scoreStars="★☆☆☆☆";scoreClass="danger";break;case"NO_SENTIMENT":scoreText="without sentiment";break}var score={scoreIcon:scoreIcon,scoreColor:scoreColor,scoreText:scoreText,scoreStars:scoreStars,scoreClass:scoreClass};return score};$("document").ready(function(){$("input[type=search]").on("keyup",function(){$("[data-action=search]").each(function(){toSearch=$("input[type=search]").val().toLowerCase();elementText=$(this).text().toLowerCase();if(elementText.match(toSearch)){$(this).show()}else{$(this).hide()}})})});$("document").ready(function(){var url="http://tweetssentiment.com/";var tweetText="Tweets Sentiment helps you to know if "+"the tweets feeling of a topic is positive or negative.";var href="http://twitter.com/share?"+"text="+encodeURIComponent(tweetText)+"&via=TweetsSentiment"+"&url="+encodeURIComponent(url);$("#share-link-navbar").attr("href",href);$("#share-link-button").attr("href",href)});var util_getShareLink=function(score,hashtag){var url="http://tweetssentiment.com/hashtag.html?"+"q="+encodeURIComponent(hashtag.hashtagText);var tweetText='"'+hashtag.hashtagText+'" has a '+score.scoreText+" tweets sentiment ("+score.scoreStars+") > "+url;var href="http://twitter.com/share?"+"text="+encodeURIComponent(tweetText)+"&via=TweetsSentiment";return href};var util_putShareLink=function(element,score,hashtag){$(element).attr("href",util_getShareLink(score,hashtag))};var util_parseTweetToHtml=function(tweet){tweet=tweet||{};if(tweet.textHtml){return tweet.textHtml}else{return util_parseTweetTextToHtml(tweet.text)}};var util_parseTweetTextToHtml=function(tweetText){tweetText=tweetText||"";tweetText=tweetText.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&~\?\/.=]+/g,function(url){return url.link(url)});tweetText=tweetText.replace(/[@]+[A-Za-z0-9-_]+/g,function(username){return username.link("http://twitter.com/"+username.replace("@",""))});tweetText=tweetText.replace(/[#]+[A-Za-z0-9-_]+/g,function(tag){return tag.link("http://search.twitter.com/search?q="+tag.replace("#",""))});return tweetText};(function(undefined){var moment,VERSION="2.1.0",round=Math.round,i,languages={},hasModule=typeof module!=="undefined"&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{1,4}/,parseTokenSixDigits=/[+\-]?\d{1,6}/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/i,parseTokenT=/T/i,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,isoRegex=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoTimes=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},formatFunctions={},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.lang().monthsShort(this,format)},MMMM:function(format){return this.lang().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.lang().weekdaysMin(this,format)},ddd:function(format){return this.lang().weekdaysShort(this,format)},dddd:function(format){return this.lang().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return leftZeroFill(~~(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+leftZeroFill(~~(a/60),2)+":"+leftZeroFill(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";if(a<0){a=-a;b="-"}return b+leftZeroFill(~~(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func,period){return function(a){return this.lang().ordinal(func.call(this,a),period)}}while(ordinalizeTokens.length){i=ordinalizeTokens.pop();formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i)}while(paddedTokens.length){i=paddedTokens.pop();formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2)}formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3);function Language(){}function Moment(config){extend(this,config)}function Duration(duration){var years=duration.years||duration.year||duration.y||0,months=duration.months||duration.month||duration.M||0,weeks=duration.weeks||duration.week||duration.w||0,days=duration.days||duration.day||duration.d||0,hours=duration.hours||duration.hour||duration.h||0,minutes=duration.minutes||duration.minute||duration.m||0,seconds=duration.seconds||duration.second||duration.s||0,milliseconds=duration.milliseconds||duration.millisecond||duration.ms||0;this._input=duration;this._milliseconds=milliseconds+seconds*1e3+minutes*6e4+hours*36e5;this._days=days+weeks*7;this._months=months+years*12;this._data={};this._bubble()}function extend(a,b){for(var i in b){if(b.hasOwnProperty(i)){a[i]=b[i]}}return a}function absRound(number){if(number<0){return Math.ceil(number)}else{return Math.floor(number)}}function leftZeroFill(number,targetLength){var output=number+"";while(output.length<targetLength){output="0"+output}return output}function addOrSubtractDurationFromMoment(mom,duration,isAdding,ignoreUpdateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months,minutes,hours,currentDate;if(milliseconds){mom._d.setTime(+mom._d+milliseconds*isAdding)}if(days||months){minutes=mom.minute();hours=mom.hour()}if(days){mom.date(mom.date()+days*isAdding)}if(months){mom.month(mom.month()+months*isAdding)}if(milliseconds&&!ignoreUpdateOffset){moment.updateOffset(mom)}if(days||months){mom.minute(minutes);mom.hour(hours)}}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]"}function compareArrays(array1,array2){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(~~array1[i]!==~~array2[i]){diffs++}}return diffs+lengthDiff}function normalizeUnits(units){return units?unitAliases[units]||units.toLowerCase().replace(/(.)s$/,"$1"):units}Language.prototype={set:function(config){var prop,i;for(i in config){prop=config[i];if(typeof prop==="function"){this[i]=prop}else{this["_"+i]=prop}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName){var i,mom,regex;if(!this._monthsParse){this._monthsParse=[]}for(i=0;i<12;i++){if(!this._monthsParse[i]){mom=moment([2e3,i]);regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")}if(this._monthsParse[i].test(monthName)){return i}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;if(!this._weekdaysParse){this._weekdaysParse=[]}for(i=0;i<7;i++){if(!this._weekdaysParse[i]){mom=moment([2e3,1]).day(i);regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")}if(this._weekdaysParse[i].test(weekdayName)){return i}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];if(!output&&this._longDateFormat[key.toUpperCase()]){output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)});this._longDateFormat[key]=output}return output},isPM:function(input){return(input+"").toLowerCase()[0]==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom){var output=this._calendar[key];return typeof output==="function"?output.apply(mom):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return typeof output==="function"?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return typeof format==="function"?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}};function loadLang(key,values){values.abbr=key;if(!languages[key]){languages[key]=new Language}languages[key].set(values);return languages[key]}function getLangDefinition(key){if(!key){return moment.fn._lang}if(!languages[key]&&hasModule){try{require("./lang/"+key)}catch(e){return moment.fn._lang}}return languages[key]}function removeFormattingTokens(input){if(input.match(/\[.*\]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="";for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){var i=5;function replaceLongDateFormatTokens(input){return m.lang().longDateFormat(input)||input}while(i--&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens)}if(!formatFunctions[format]){formatFunctions[format]=makeFormatFunction(format)}return formatFunctions[format](m)}function getParseRegexForToken(token,config){switch(token){case"DDDD":return parseTokenThreeDigits;case"YYYY":return parseTokenFourDigits;case"YYYYY":return parseTokenSixDigits;case"S":case"SS":case"SSS":case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return getLangDefinition(config._l)._meridiemParse;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return parseTokenOneOrTwoDigits;default:return new RegExp(token.replace("\\",""))}}function timezoneMinutesFromString(string){var tzchunk=(parseTokenTimezone.exec(string)||[])[0],parts=(tzchunk+"").match(parseTimezoneChunker)||["-",0,0],minutes=+(parts[1]*60)+~~parts[2];return parts[0]==="+"?-minutes:minutes}function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case"M":case"MM":datePartArray[1]=input==null?0:~~input-1;break;case"MMM":case"MMMM":a=getLangDefinition(config._l).monthsParse(input);if(a!=null){datePartArray[1]=a}else{config._isValid=false}break;case"D":case"DD":case"DDD":case"DDDD":if(input!=null){datePartArray[2]=~~input}break;case"YY":datePartArray[0]=~~input+(~~input>68?1900:2e3);break;case"YYYY":case"YYYYY":datePartArray[0]=~~input;break;case"a":case"A":config._isPm=getLangDefinition(config._l).isPM(input);break;case"H":case"HH":case"h":case"hh":datePartArray[3]=~~input;break;case"m":case"mm":datePartArray[4]=~~input;break;case"s":case"ss":datePartArray[5]=~~input;break;case"S":case"SS":case"SSS":datePartArray[6]=~~(("0."+input)*1e3);break;case"X":config._d=new Date(parseFloat(input)*1e3);break;case"Z":case"ZZ":config._useUTC=true;config._tzm=timezoneMinutesFromString(input);break}if(input==null){config._isValid=false}}function dateFromArray(config){var i,date,input=[];if(config._d){return}for(i=0;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i]}input[3]+=~~((config._tzm||0)/60);input[4]+=~~((config._tzm||0)%60);date=new Date(0);if(config._useUTC){date.setUTCFullYear(input[0],input[1],input[2]);date.setUTCHours(input[3],input[4],input[5],input[6])}else{date.setFullYear(input[0],input[1],input[2]);date.setHours(input[3],input[4],input[5],input[6])}config._d=date}function makeDateFromStringAndFormat(config){var tokens=config._f.match(formattingTokens),string=config._i,i,parsedInput;config._a=[];for(i=0;i<tokens.length;i++){parsedInput=(getParseRegexForToken(tokens[i],config).exec(string)||[])[0];if(parsedInput){string=string.slice(string.indexOf(parsedInput)+parsedInput.length)}if(formatTokenFunctions[tokens[i]]){addTimeToArrayFromToken(tokens[i],parsedInput,config)}}if(string){config._il=string}if(config._isPm&&config._a[3]<12){config._a[3]+=12}if(config._isPm===false&&config._a[3]===12){config._a[3]=0}dateFromArray(config)}function makeDateFromStringAndArray(config){var tempConfig,tempMoment,bestMoment,scoreToBeat=99,i,currentScore;for(i=0;i<config._f.length;i++){tempConfig=extend({},config);tempConfig._f=config._f[i];makeDateFromStringAndFormat(tempConfig);tempMoment=new Moment(tempConfig);currentScore=compareArrays(tempConfig._a,tempMoment.toArray());if(tempMoment._il){currentScore+=tempMoment._il.length}if(currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempMoment}}extend(config,bestMoment)}function makeDateFromString(config){var i,string=config._i,match=isoRegex.exec(string);if(match){config._f="YYYY-MM-DD"+(match[2]||" ");for(i=0;i<4;i++){if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}}if(parseTokenTimezone.exec(string)){config._f+=" Z"}makeDateFromStringAndFormat(config)}else{config._d=new Date(string)}}function makeDateFromInput(config){var input=config._i,matched=aspNetJsonRegex.exec(input);if(input===undefined){config._d=new Date}else if(matched){config._d=new Date(+matched[1])}else if(typeof input==="string"){makeDateFromString(config)}else if(isArray(input)){config._a=input.slice(0);dateFromArray(config)}else{config._d=input instanceof Date?new Date(+input):new Date(input)}}function substituteTimeAgo(string,number,withoutSuffix,isFuture,lang){return lang.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(milliseconds,withoutSuffix,lang){var seconds=round(Math.abs(milliseconds)/1e3),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),args=seconds<45&&["s",seconds]||minutes===1&&["m"]||minutes<45&&["mm",minutes]||hours===1&&["h"]||hours<22&&["hh",hours]||days===1&&["d"]||days<=25&&["dd",days]||days<=45&&["M"]||days<345&&["MM",round(days/30)]||years===1&&["y"]||["yy",years];args[2]=withoutSuffix;args[3]=milliseconds>0;args[4]=lang;return substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end){daysToDayOfWeek-=7}if(daysToDayOfWeek<end-7){daysToDayOfWeek+=7}adjustedMoment=moment(mom).add("d",daysToDayOfWeek);return{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function makeMoment(config){var input=config._i,format=config._f;if(input===null||input===""){return null}if(typeof input==="string"){config._i=input=getLangDefinition().preparse(input)}if(moment.isMoment(input)){config=extend({},input);config._d=new Date(+input._d)}else if(format){if(isArray(format)){makeDateFromStringAndArray(config)}else{makeDateFromStringAndFormat(config)}}else{makeDateFromInput(config)}return new Moment(config)}moment=function(input,format,lang){return makeMoment({_i:input,_f:format,_l:lang,_isUTC:false})};moment.utc=function(input,format,lang){return makeMoment({_useUTC:true,_isUTC:true,_l:lang,_i:input,_f:format})};moment.unix=function(input){return moment(input*1e3)};moment.duration=function(input,key){var isDuration=moment.isDuration(input),isNumber=typeof input==="number",duration=isDuration?input._input:isNumber?{}:input,matched=aspNetTimeSpanJsonRegex.exec(input),sign,ret;if(isNumber){if(key){duration[key]=input}else{duration.milliseconds=input}}else if(matched){sign=matched[1]==="-"?-1:1;duration={y:0,d:~~matched[2]*sign,h:~~matched[3]*sign,m:~~matched[4]*sign,s:~~matched[5]*sign,ms:~~matched[6]*sign}}ret=new Duration(duration);if(isDuration&&input.hasOwnProperty("_lang")){ret._lang=input._lang}return ret};moment.version=VERSION;moment.defaultFormat=isoFormat;moment.updateOffset=function(){};moment.lang=function(key,values){if(!key){return moment.fn._lang._abbr}if(values){loadLang(key,values)}else if(!languages[key]){getLangDefinition(key)}moment.duration.fn._lang=moment.fn._lang=getLangDefinition(key)};moment.langData=function(key){if(key&&key._lang&&key._lang._abbr){key=key._lang._abbr}return getLangDefinition(key)};moment.isMoment=function(obj){return obj instanceof Moment};moment.isDuration=function(obj){return obj instanceof Duration};moment.fn=Moment.prototype={clone:function(){return moment(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return formatMoment(moment(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){if(this._isValid==null){if(this._a){this._isValid=!compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())}else{this._isValid=!isNaN(this._d.getTime())}}return!!this._isValid},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=false;return this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.lang().postformat(output)},add:function(input,val){var dur;if(typeof input==="string"){dur=moment.duration(+val,input)}else{dur=moment.duration(input,val)}addOrSubtractDurationFromMoment(this,dur,1);return this},subtract:function(input,val){var dur;if(typeof input==="string"){dur=moment.duration(+val,input)}else{dur=moment.duration(input,val)}addOrSubtractDurationFromMoment(this,dur,-1);return this},diff:function(input,units,asFloat){var that=this._isUTC?moment(input).zone(this._offset||0):moment(input).local(),zoneDiff=(this.zone()-that.zone())*6e4,diff,output;units=normalizeUnits(units);if(units==="year"||units==="month"){diff=(this.daysInMonth()+that.daysInMonth())*432e5;output=(this.year()-that.year())*12+(this.month()-that.month());output+=(this-moment(this).startOf("month")-(that-moment(that).startOf("month")))/diff;output-=(this.zone()-moment(this).startOf("month").zone()-(that.zone()-moment(that).startOf("month").zone()))*6e4/diff;if(units==="year"){output=output/12}}else{diff=this-that;output=units==="second"?diff/1e3:units==="minute"?diff/6e4:units==="hour"?diff/36e5:units==="day"?(diff-zoneDiff)/864e5:units==="week"?(diff-zoneDiff)/6048e5:diff}return asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration(this.diff(time)).lang(this.lang()._abbr).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(){var diff=this.diff(moment().startOf("day"),"days",true),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(format,this))},isLeapYear:function(){var year=this.year();return year%4===0&&year%100!==0||year%400===0},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){if(typeof input==="string"){input=this.lang().weekdaysParse(input);if(typeof input!=="number"){return this}}return this.add({d:input-day})}else{return day}},month:function(input){var utc=this._isUTC?"UTC":"",dayOfMonth,daysInMonth;if(input!=null){if(typeof input==="string"){input=this.lang().monthsParse(input);if(typeof input!=="number"){return this}}dayOfMonth=this.date();this.date(1);this._d["set"+utc+"Month"](input);this.date(Math.min(dayOfMonth,this.daysInMonth()));moment.updateOffset(this);return this}else{return this._d["get"+utc+"Month"]()}},startOf:function(units){units=normalizeUnits(units);switch(units){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(units==="week"){this.weekday(0)}return this},endOf:function(units){return this.startOf(units).add(units,1).subtract("ms",1)},isAfter:function(input,units){units=typeof units!=="undefined"?units:"millisecond";return+this.clone().startOf(units)>+moment(input).startOf(units)},isBefore:function(input,units){units=typeof units!=="undefined"?units:"millisecond";return+this.clone().startOf(units)<+moment(input).startOf(units)},isSame:function(input,units){units=typeof units!=="undefined"?units:"millisecond";return+this.clone().startOf(units)===+moment(input).startOf(units)},min:function(other){other=moment.apply(null,arguments);return other<this?this:other},max:function(other){other=moment.apply(null,arguments);return other>this?this:other},zone:function(input){var offset=this._offset||0;if(input!=null){if(typeof input==="string"){input=timezoneMinutesFromString(input)}if(Math.abs(input)<16){input=input*60}this._offset=input;this._isUTC=true;if(offset!==input){addOrSubtractDurationFromMoment(this,moment.duration(offset-input,"m"),1,true)}}else{return this._isUTC?offset:this._d.getTimezoneOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return moment.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add("d",input-dayOfYear)},weekYear:function(input){var year=weekOfYear(this,this.lang()._week.dow,this.lang()._week.doy).year;return input==null?year:this.add("y",input-year)},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return input==null?year:this.add("y",input-year)},week:function(input){var week=this.lang().week(this);return input==null?week:this.add("d",(input-week)*7)},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add("d",(input-week)*7)},weekday:function(input){var weekday=(this._d.getDay()+7-this.lang()._week.dow)%7;return input==null?weekday:this.add("d",input-weekday)},isoWeekday:function(input){return input==null?this.day()||7:this.day(this.day()%7?input:input-7)},lang:function(key){if(key===undefined){return this._lang}else{this._lang=getLangDefinition(key);return this}}};function makeGetterAndSetter(name,key){moment.fn[name]=moment.fn[name+"s"]=function(input){var utc=this._isUTC?"UTC":"";if(input!=null){this._d["set"+utc+key](input);moment.updateOffset(this);return this}else{return this._d["get"+utc+key]()}}}for(i=0;i<proxyGettersAndSetters.length;i++){makeGetterAndSetter(proxyGettersAndSetters[i].toLowerCase().replace(/s$/,""),proxyGettersAndSetters[i])}makeGetterAndSetter("year","FullYear");moment.fn.days=moment.fn.day;moment.fn.months=moment.fn.month;moment.fn.weeks=moment.fn.week;moment.fn.isoWeeks=moment.fn.isoWeek;moment.fn.toJSON=moment.fn.toISOString;moment.duration.fn=Duration.prototype={_bubble:function(){var milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,seconds,minutes,hours,years;data.milliseconds=milliseconds%1e3;seconds=absRound(milliseconds/1e3);data.seconds=seconds%60;minutes=absRound(seconds/60);data.minutes=minutes%60;hours=absRound(minutes/60);data.hours=hours%24;days+=absRound(hours/24);data.days=days%30;months+=absRound(days/30);data.months=months%12;years=absRound(months/12);data.years=years},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+~~(this._months/12)*31536e6},humanize:function(withSuffix){var difference=+this,output=relativeTime(difference,!withSuffix,this.lang());
if(withSuffix){output=this.lang().pastFuture(difference,output)}return this.lang().postformat(output)},add:function(input,val){var dur=moment.duration(input,val);this._milliseconds+=dur._milliseconds;this._days+=dur._days;this._months+=dur._months;this._bubble();return this},subtract:function(input,val){var dur=moment.duration(input,val);this._milliseconds-=dur._milliseconds;this._days-=dur._days;this._months-=dur._months;this._bubble();return this},get:function(units){units=normalizeUnits(units);return this[units.toLowerCase()+"s"]()},as:function(units){units=normalizeUnits(units);return this["as"+units.charAt(0).toUpperCase()+units.slice(1)+"s"]()},lang:moment.fn.lang};function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeDurationAsGetter(name,factor){moment.duration.fn["as"+name]=function(){return+this/factor}}for(i in unitMillisecondFactors){if(unitMillisecondFactors.hasOwnProperty(i)){makeDurationAsGetter(i,unitMillisecondFactors[i]);makeDurationGetter(i.toLowerCase())}}makeDurationAsGetter("Weeks",6048e5);moment.duration.fn.asMonths=function(){return(+this-this.years()*31536e6)/2592e6+this.years()*12};moment.lang("en",{ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});if(hasModule){module.exports=moment}if(typeof ender==="undefined"){this["moment"]=moment}if(typeof define==="function"&&define.amd){define("moment",[],function(){return moment})}}).call(this);window.Chart=function(context){var chart=this;var animationOptions={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){if((t/=1/2)<1)return 1/2*t*t;return-1/2*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){if((t/=1/2)<1)return 1/2*t*t*t;return 1/2*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){if((t/=1/2)<1)return 1/2*t*t*t*t;return-1/2*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){if((t/=1/2)<1)return 1/2*t*t*t*t*t;return 1/2*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-1/2*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return t==0?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return t==1?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){if(t==0)return 0;if(t==1)return 1;if((t/=1/2)<1)return 1/2*Math.pow(2,10*(t-1));return 1/2*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){if(t>=1)return t;return-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){if((t/=1/2)<1)return-1/2*(Math.sqrt(1-t*t)-1);return 1/2*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var s=1.70158;var p=0;var a=1;if(t==0)return 0;if((t/=1)==1)return 1;if(!p)p=1*.3;if(a<Math.abs(1)){a=1;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(1/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p))},easeOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t==0)return 0;if((t/=1)==1)return 1;if(!p)p=1*.3;if(a<Math.abs(1)){a=1;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(1/a);return a*Math.pow(2,-10*t)*Math.sin((t*1-s)*(2*Math.PI)/p)+1},easeInOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t==0)return 0;if((t/=1/2)==2)return 1;if(!p)p=1*(.3*1.5);if(a<Math.abs(1)){a=1;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(1/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p));return a*Math.pow(2,-10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p)*.5+1},easeInBack:function(t){var s=1.70158;return 1*(t/=1)*t*((s+1)*t-s)},easeOutBack:function(t){var s=1.70158;return 1*((t=t/1-1)*t*((s+1)*t+s)+1)},easeInOutBack:function(t){var s=1.70158;if((t/=1/2)<1)return 1/2*(t*t*(((s*=1.525)+1)*t-s));return 1/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)},easeInBounce:function(t){return 1-animationOptions.easeOutBounce(1-t)},easeOutBounce:function(t){if((t/=1)<1/2.75){return 1*(7.5625*t*t)}else if(t<2/2.75){return 1*(7.5625*(t-=1.5/2.75)*t+.75)}else if(t<2.5/2.75){return 1*(7.5625*(t-=2.25/2.75)*t+.9375)}else{return 1*(7.5625*(t-=2.625/2.75)*t+.984375)}},easeInOutBounce:function(t){if(t<1/2)return animationOptions.easeInBounce(t*2)*.5;return animationOptions.easeOutBounce(t*2-1)*.5+1*.5}};var width=context.canvas.width;var height=context.canvas.height;if(window.devicePixelRatio){context.canvas.style.width=width+"px";context.canvas.style.height=height+"px";context.canvas.height=height*window.devicePixelRatio;context.canvas.width=width*window.devicePixelRatio;context.scale(window.devicePixelRatio,window.devicePixelRatio)}this.PolarArea=function(data,options){chart.PolarArea.defaults={scaleOverlay:true,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:true,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:true,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null};var config=options?mergeChartConfig(chart.PolarArea.defaults,options):chart.PolarArea.defaults;return new PolarArea(data,config,context)};this.Radar=function(data,options){chart.Radar.defaults={scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:true,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:false,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:true,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:true,pointDotRadius:3,pointDotStrokeWidth:1,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var config=options?mergeChartConfig(chart.Radar.defaults,options):chart.Radar.defaults;return new Radar(data,config,context)};this.Pie=function(data,options){chart.Pie.defaults={segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:true,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null};var config=options?mergeChartConfig(chart.Pie.defaults,options):chart.Pie.defaults;return new Pie(data,config,context)};this.Doughnut=function(data,options){chart.Doughnut.defaults={segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animation:true,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null};var config=options?mergeChartConfig(chart.Doughnut.defaults,options):chart.Doughnut.defaults;return new Doughnut(data,config,context)};this.Line=function(data,options){chart.Line.defaults={scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:true,pointDot:true,pointDotRadius:4,pointDotStrokeWidth:2,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var config=options?mergeChartConfig(chart.Line.defaults,options):chart.Line.defaults;return new Line(data,config,context)};this.Bar=function(data,options){chart.Bar.defaults={scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var config=options?mergeChartConfig(chart.Bar.defaults,options):chart.Bar.defaults;return new Bar(data,config,context)};var clear=function(c){c.clearRect(0,0,width,height)};var PolarArea=function(data,config,ctx){var maxSize,scaleHop,calculatedScale,labelHeight,scaleHeight,valueBounds,labelTemplateString;calculateDrawingSizes();valueBounds=getValueBounds();labelTemplateString=config.scaleShowLabels?config.scaleLabel:null;if(!config.scaleOverride){calculatedScale=calculateScale(scaleHeight,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString)}else{calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,labels:[]};populateLabels(labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,config.scaleStepWidth)}scaleHop=maxSize/calculatedScale.steps;animationLoop(config,drawScale,drawAllSegments,ctx);function calculateDrawingSizes(){maxSize=Min([width,height])/2;maxSize-=Max([config.scaleFontSize*.5,config.scaleLineWidth*.5]);labelHeight=config.scaleFontSize*2;if(config.scaleShowLabelBackdrop){labelHeight+=2*config.scaleBackdropPaddingY;maxSize-=config.scaleBackdropPaddingY*1.5}scaleHeight=maxSize;labelHeight=Default(labelHeight,5)}function drawScale(){for(var i=0;i<calculatedScale.steps;i++){if(config.scaleShowLine){ctx.beginPath();ctx.arc(width/2,height/2,scaleHop*(i+1),0,Math.PI*2,true);ctx.strokeStyle=config.scaleLineColor;ctx.lineWidth=config.scaleLineWidth;ctx.stroke()}if(config.scaleShowLabels){ctx.textAlign="center";ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;var label=calculatedScale.labels[i];if(config.scaleShowLabelBackdrop){var textWidth=ctx.measureText(label).width;ctx.fillStyle=config.scaleBackdropColor;ctx.beginPath();ctx.rect(Math.round(width/2-textWidth/2-config.scaleBackdropPaddingX),Math.round(height/2-scaleHop*(i+1)-config.scaleFontSize*.5-config.scaleBackdropPaddingY),Math.round(textWidth+config.scaleBackdropPaddingX*2),Math.round(config.scaleFontSize+config.scaleBackdropPaddingY*2));ctx.fill()}ctx.textBaseline="middle";ctx.fillStyle=config.scaleFontColor;ctx.fillText(label,width/2,height/2-scaleHop*(i+1))}}}function drawAllSegments(animationDecimal){var startAngle=-Math.PI/2,angleStep=Math.PI*2/data.length,scaleAnimation=1,rotateAnimation=1;if(config.animation){if(config.animateScale){scaleAnimation=animationDecimal}if(config.animateRotate){rotateAnimation=animationDecimal}}for(var i=0;i<data.length;i++){ctx.beginPath();ctx.arc(width/2,height/2,scaleAnimation*calculateOffset(data[i].value,calculatedScale,scaleHop),startAngle,startAngle+rotateAnimation*angleStep,false);ctx.lineTo(width/2,height/2);ctx.closePath();ctx.fillStyle=data[i].color;ctx.fill();if(config.segmentShowStroke){ctx.strokeStyle=config.segmentStrokeColor;ctx.lineWidth=config.segmentStrokeWidth;ctx.stroke()}startAngle+=rotateAnimation*angleStep}}function getValueBounds(){var upperValue=Number.MIN_VALUE;var lowerValue=Number.MAX_VALUE;for(var i=0;i<data.length;i++){if(data[i].value>upperValue){upperValue=data[i].value}if(data[i].value<lowerValue){lowerValue=data[i].value}}var maxSteps=Math.floor(scaleHeight/(labelHeight*.66));var minSteps=Math.floor(scaleHeight/labelHeight*.5);return{maxValue:upperValue,minValue:lowerValue,maxSteps:maxSteps,minSteps:minSteps}}};var Radar=function(data,config,ctx){var maxSize,scaleHop,calculatedScale,labelHeight,scaleHeight,valueBounds,labelTemplateString;if(!data.labels)data.labels=[];calculateDrawingSizes();var valueBounds=getValueBounds();labelTemplateString=config.scaleShowLabels?config.scaleLabel:null;if(!config.scaleOverride){calculatedScale=calculateScale(scaleHeight,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString)}else{calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,labels:[]};populateLabels(labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,config.scaleStepWidth)}scaleHop=maxSize/calculatedScale.steps;animationLoop(config,drawScale,drawAllDataPoints,ctx);function drawAllDataPoints(animationDecimal){var rotationDegree=2*Math.PI/data.datasets[0].data.length;ctx.save();ctx.translate(width/2,height/2);for(var i=0;i<data.datasets.length;i++){ctx.beginPath();ctx.moveTo(0,animationDecimal*(-1*calculateOffset(data.datasets[i].data[0],calculatedScale,scaleHop)));for(var j=1;j<data.datasets[i].data.length;j++){ctx.rotate(rotationDegree);ctx.lineTo(0,animationDecimal*(-1*calculateOffset(data.datasets[i].data[j],calculatedScale,scaleHop)))}ctx.closePath();ctx.fillStyle=data.datasets[i].fillColor;ctx.strokeStyle=data.datasets[i].strokeColor;ctx.lineWidth=config.datasetStrokeWidth;ctx.fill();ctx.stroke();if(config.pointDot){ctx.fillStyle=data.datasets[i].pointColor;ctx.strokeStyle=data.datasets[i].pointStrokeColor;ctx.lineWidth=config.pointDotStrokeWidth;for(var k=0;k<data.datasets[i].data.length;k++){ctx.rotate(rotationDegree);ctx.beginPath();ctx.arc(0,animationDecimal*(-1*calculateOffset(data.datasets[i].data[k],calculatedScale,scaleHop)),config.pointDotRadius,2*Math.PI,false);ctx.fill();ctx.stroke()}}ctx.rotate(rotationDegree)}ctx.restore()}function drawScale(){var rotationDegree=2*Math.PI/data.datasets[0].data.length;ctx.save();ctx.translate(width/2,height/2);if(config.angleShowLineOut){ctx.strokeStyle=config.angleLineColor;ctx.lineWidth=config.angleLineWidth;for(var h=0;h<data.datasets[0].data.length;h++){ctx.rotate(rotationDegree);ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(0,-maxSize);ctx.stroke()}}for(var i=0;i<calculatedScale.steps;i++){ctx.beginPath();if(config.scaleShowLine){ctx.strokeStyle=config.scaleLineColor;ctx.lineWidth=config.scaleLineWidth;ctx.moveTo(0,-scaleHop*(i+1));for(var j=0;j<data.datasets[0].data.length;j++){ctx.rotate(rotationDegree);ctx.lineTo(0,-scaleHop*(i+1))}ctx.closePath();ctx.stroke()}if(config.scaleShowLabels){ctx.textAlign="center";ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;ctx.textBaseline="middle";if(config.scaleShowLabelBackdrop){var textWidth=ctx.measureText(calculatedScale.labels[i]).width;ctx.fillStyle=config.scaleBackdropColor;ctx.beginPath();ctx.rect(Math.round(-textWidth/2-config.scaleBackdropPaddingX),Math.round(-scaleHop*(i+1)-config.scaleFontSize*.5-config.scaleBackdropPaddingY),Math.round(textWidth+config.scaleBackdropPaddingX*2),Math.round(config.scaleFontSize+config.scaleBackdropPaddingY*2));ctx.fill()}ctx.fillStyle=config.scaleFontColor;ctx.fillText(calculatedScale.labels[i],0,-scaleHop*(i+1))}}for(var k=0;k<data.labels.length;k++){ctx.font=config.pointLabelFontStyle+" "+config.pointLabelFontSize+"px "+config.pointLabelFontFamily;ctx.fillStyle=config.pointLabelFontColor;var opposite=Math.sin(rotationDegree*k)*(maxSize+config.pointLabelFontSize);var adjacent=Math.cos(rotationDegree*k)*(maxSize+config.pointLabelFontSize);if(rotationDegree*k==Math.PI||rotationDegree*k==0){ctx.textAlign="center"}else if(rotationDegree*k>Math.PI){ctx.textAlign="right"}else{ctx.textAlign="left"}ctx.textBaseline="middle";ctx.fillText(data.labels[k],opposite,-adjacent)}ctx.restore()}function calculateDrawingSizes(){maxSize=Min([width,height])/2;labelHeight=config.scaleFontSize*2;var labelLength=0;for(var i=0;i<data.labels.length;i++){ctx.font=config.pointLabelFontStyle+" "+config.pointLabelFontSize+"px "+config.pointLabelFontFamily;var textMeasurement=ctx.measureText(data.labels[i]).width;if(textMeasurement>labelLength)labelLength=textMeasurement}maxSize-=Max([labelLength,config.pointLabelFontSize/2*1.5]);maxSize-=config.pointLabelFontSize;maxSize=CapValue(maxSize,null,0);scaleHeight=maxSize;labelHeight=Default(labelHeight,5)}function getValueBounds(){var upperValue=Number.MIN_VALUE;var lowerValue=Number.MAX_VALUE;for(var i=0;i<data.datasets.length;i++){for(var j=0;j<data.datasets[i].data.length;j++){if(data.datasets[i].data[j]>upperValue){upperValue=data.datasets[i].data[j]}if(data.datasets[i].data[j]<lowerValue){lowerValue=data.datasets[i].data[j]}}}var maxSteps=Math.floor(scaleHeight/(labelHeight*.66));var minSteps=Math.floor(scaleHeight/labelHeight*.5);return{maxValue:upperValue,minValue:lowerValue,maxSteps:maxSteps,minSteps:minSteps}}};var Pie=function(data,config,ctx){var segmentTotal=0;var pieRadius=Min([height/2,width/2])-5;for(var i=0;i<data.length;i++){segmentTotal+=data[i].value}animationLoop(config,null,drawPieSegments,ctx);function drawPieSegments(animationDecimal){var cumulativeAngle=-Math.PI/2,scaleAnimation=1,rotateAnimation=1;if(config.animation){if(config.animateScale){scaleAnimation=animationDecimal}if(config.animateRotate){rotateAnimation=animationDecimal}}for(var i=0;i<data.length;i++){var segmentAngle=rotateAnimation*(data[i].value/segmentTotal*(Math.PI*2));ctx.beginPath();ctx.arc(width/2,height/2,scaleAnimation*pieRadius,cumulativeAngle,cumulativeAngle+segmentAngle);ctx.lineTo(width/2,height/2);ctx.closePath();ctx.fillStyle=data[i].color;ctx.fill();if(config.segmentShowStroke){ctx.lineWidth=config.segmentStrokeWidth;ctx.strokeStyle=config.segmentStrokeColor;ctx.stroke()}cumulativeAngle+=segmentAngle}}};var Doughnut=function(data,config,ctx){var segmentTotal=0;var doughnutRadius=Min([height/2,width/2])-5;var cutoutRadius=doughnutRadius*(config.percentageInnerCutout/100);for(var i=0;i<data.length;i++){segmentTotal+=data[i].value}animationLoop(config,null,drawPieSegments,ctx);function drawPieSegments(animationDecimal){var cumulativeAngle=-Math.PI/2,scaleAnimation=1,rotateAnimation=1;if(config.animation){if(config.animateScale){scaleAnimation=animationDecimal}if(config.animateRotate){rotateAnimation=animationDecimal}}for(var i=0;i<data.length;i++){var segmentAngle=rotateAnimation*(data[i].value/segmentTotal*(Math.PI*2));ctx.beginPath();ctx.arc(width/2,height/2,scaleAnimation*doughnutRadius,cumulativeAngle,cumulativeAngle+segmentAngle,false);ctx.arc(width/2,height/2,scaleAnimation*cutoutRadius,cumulativeAngle+segmentAngle,cumulativeAngle,true);ctx.closePath();ctx.fillStyle=data[i].color;ctx.fill();if(config.segmentShowStroke){ctx.lineWidth=config.segmentStrokeWidth;ctx.strokeStyle=config.segmentStrokeColor;ctx.stroke()}cumulativeAngle+=segmentAngle}}};var Line=function(data,config,ctx){var maxSize,scaleHop,calculatedScale,labelHeight,scaleHeight,valueBounds,labelTemplateString,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,rotateLabels=0;calculateDrawingSizes();valueBounds=getValueBounds();labelTemplateString=config.scaleShowLabels?config.scaleLabel:"";if(!config.scaleOverride){calculatedScale=calculateScale(scaleHeight,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString)}else{calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,labels:[]};populateLabels(labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,config.scaleStepWidth)}scaleHop=Math.floor(scaleHeight/calculatedScale.steps);calculateXAxisSize();animationLoop(config,drawScale,drawLines,ctx);function drawLines(animPc){for(var i=0;i<data.datasets.length;i++){ctx.strokeStyle=data.datasets[i].strokeColor;ctx.lineWidth=config.datasetStrokeWidth;ctx.beginPath();ctx.moveTo(yAxisPosX,xAxisPosY-animPc*calculateOffset(data.datasets[i].data[0],calculatedScale,scaleHop));for(var j=1;j<data.datasets[i].data.length;j++){if(config.bezierCurve){ctx.bezierCurveTo(xPos(j-.5),yPos(i,j-1),xPos(j-.5),yPos(i,j),xPos(j),yPos(i,j))}else{ctx.lineTo(xPos(j),yPos(i,j))}}ctx.stroke();if(config.datasetFill){ctx.lineTo(yAxisPosX+valueHop*(data.datasets[i].data.length-1),xAxisPosY);ctx.lineTo(yAxisPosX,xAxisPosY);ctx.closePath();ctx.fillStyle=data.datasets[i].fillColor;ctx.fill()}else{ctx.closePath()}if(config.pointDot){ctx.fillStyle=data.datasets[i].pointColor;ctx.strokeStyle=data.datasets[i].pointStrokeColor;ctx.lineWidth=config.pointDotStrokeWidth;for(var k=0;k<data.datasets[i].data.length;k++){ctx.beginPath();ctx.arc(yAxisPosX+valueHop*k,xAxisPosY-animPc*calculateOffset(data.datasets[i].data[k],calculatedScale,scaleHop),config.pointDotRadius,0,Math.PI*2,true);ctx.fill();ctx.stroke()}}}function yPos(dataSet,iteration){return xAxisPosY-animPc*calculateOffset(data.datasets[dataSet].data[iteration],calculatedScale,scaleHop)}function xPos(iteration){return yAxisPosX+valueHop*iteration}}function drawScale(){ctx.lineWidth=config.scaleLineWidth;ctx.strokeStyle=config.scaleLineColor;ctx.beginPath();ctx.moveTo(width-widestXLabel/2+5,xAxisPosY);ctx.lineTo(width-widestXLabel/2-xAxisLength-5,xAxisPosY);ctx.stroke();if(rotateLabels>0){ctx.save();ctx.textAlign="right"}else{ctx.textAlign="center"}ctx.fillStyle=config.scaleFontColor;for(var i=0;i<data.labels.length;i++){ctx.save();if(rotateLabels>0){ctx.translate(yAxisPosX+i*valueHop,xAxisPosY+config.scaleFontSize);ctx.rotate(-(rotateLabels*(Math.PI/180)));ctx.fillText(data.labels[i],0,0);ctx.restore()}else{ctx.fillText(data.labels[i],yAxisPosX+i*valueHop,xAxisPosY+config.scaleFontSize+3)}ctx.beginPath();ctx.moveTo(yAxisPosX+i*valueHop,xAxisPosY+3);if(config.scaleShowGridLines&&i>0){ctx.lineWidth=config.scaleGridLineWidth;ctx.strokeStyle=config.scaleGridLineColor;ctx.lineTo(yAxisPosX+i*valueHop,5)}else{ctx.lineTo(yAxisPosX+i*valueHop,xAxisPosY+3)}ctx.stroke()}ctx.lineWidth=config.scaleLineWidth;ctx.strokeStyle=config.scaleLineColor;ctx.beginPath();ctx.moveTo(yAxisPosX,xAxisPosY+5);ctx.lineTo(yAxisPosX,5);ctx.stroke();ctx.textAlign="right";ctx.textBaseline="middle";for(var j=0;j<calculatedScale.steps;j++){ctx.beginPath();ctx.moveTo(yAxisPosX-3,xAxisPosY-(j+1)*scaleHop);if(config.scaleShowGridLines){ctx.lineWidth=config.scaleGridLineWidth;ctx.strokeStyle=config.scaleGridLineColor;ctx.lineTo(yAxisPosX+xAxisLength+5,xAxisPosY-(j+1)*scaleHop)}else{ctx.lineTo(yAxisPosX-.5,xAxisPosY-(j+1)*scaleHop)}ctx.stroke();if(config.scaleShowLabels){ctx.fillText(calculatedScale.labels[j],yAxisPosX-8,xAxisPosY-(j+1)*scaleHop)}}}function calculateXAxisSize(){var longestText=1;if(config.scaleShowLabels){ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;for(var i=0;i<calculatedScale.labels.length;i++){var measuredText=ctx.measureText(calculatedScale.labels[i]).width;longestText=measuredText>longestText?measuredText:longestText}longestText+=10}xAxisLength=width-longestText-widestXLabel;valueHop=Math.floor(xAxisLength/(data.labels.length-1));yAxisPosX=width-widestXLabel/2-xAxisLength;xAxisPosY=scaleHeight+config.scaleFontSize/2}function calculateDrawingSizes(){maxSize=height;ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;widestXLabel=1;for(var i=0;i<data.labels.length;i++){var textLength=ctx.measureText(data.labels[i]).width;widestXLabel=textLength>widestXLabel?textLength:widestXLabel}if(width/data.labels.length<widestXLabel){rotateLabels=45;if(width/data.labels.length<Math.cos(rotateLabels)*widestXLabel){rotateLabels=90;maxSize-=widestXLabel}else{maxSize-=Math.sin(rotateLabels)*widestXLabel}}else{maxSize-=config.scaleFontSize}maxSize-=5;labelHeight=config.scaleFontSize;maxSize-=labelHeight;scaleHeight=maxSize}function getValueBounds(){var upperValue=Number.MIN_VALUE;var lowerValue=Number.MAX_VALUE;for(var i=0;i<data.datasets.length;i++){for(var j=0;j<data.datasets[i].data.length;j++){if(data.datasets[i].data[j]>upperValue){upperValue=data.datasets[i].data[j]}if(data.datasets[i].data[j]<lowerValue){lowerValue=data.datasets[i].data[j]}}}var maxSteps=Math.floor(scaleHeight/(labelHeight*.66));var minSteps=Math.floor(scaleHeight/labelHeight*.5);return{maxValue:upperValue,minValue:lowerValue,maxSteps:maxSteps,minSteps:minSteps}}};var Bar=function(data,config,ctx){var maxSize,scaleHop,calculatedScale,labelHeight,scaleHeight,valueBounds,labelTemplateString,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0;calculateDrawingSizes();valueBounds=getValueBounds();labelTemplateString=config.scaleShowLabels?config.scaleLabel:"";if(!config.scaleOverride){calculatedScale=calculateScale(scaleHeight,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString)}else{calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,labels:[]};populateLabels(labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,config.scaleStepWidth)}scaleHop=Math.floor(scaleHeight/calculatedScale.steps);calculateXAxisSize();animationLoop(config,drawScale,drawBars,ctx);function drawBars(animPc){ctx.lineWidth=config.barStrokeWidth;for(var i=0;i<data.datasets.length;i++){ctx.fillStyle=data.datasets[i].fillColor;ctx.strokeStyle=data.datasets[i].strokeColor;for(var j=0;j<data.datasets[i].data.length;j++){var barOffset=yAxisPosX+config.barValueSpacing+valueHop*j+barWidth*i+config.barDatasetSpacing*i+config.barStrokeWidth*i;ctx.beginPath();ctx.moveTo(barOffset,xAxisPosY);ctx.lineTo(barOffset,xAxisPosY-animPc*calculateOffset(data.datasets[i].data[j],calculatedScale,scaleHop)+config.barStrokeWidth/2);ctx.lineTo(barOffset+barWidth,xAxisPosY-animPc*calculateOffset(data.datasets[i].data[j],calculatedScale,scaleHop)+config.barStrokeWidth/2);ctx.lineTo(barOffset+barWidth,xAxisPosY);if(config.barShowStroke){ctx.stroke()}ctx.closePath();ctx.fill()}}}function drawScale(){ctx.lineWidth=config.scaleLineWidth;ctx.strokeStyle=config.scaleLineColor;ctx.beginPath();ctx.moveTo(width-widestXLabel/2+5,xAxisPosY);ctx.lineTo(width-widestXLabel/2-xAxisLength-5,xAxisPosY);ctx.stroke();if(rotateLabels>0){ctx.save();ctx.textAlign="right"}else{ctx.textAlign="center"}ctx.fillStyle=config.scaleFontColor;for(var i=0;i<data.labels.length;i++){ctx.save();if(rotateLabels>0){ctx.translate(yAxisPosX+i*valueHop,xAxisPosY+config.scaleFontSize);ctx.rotate(-(rotateLabels*(Math.PI/180)));ctx.fillText(data.labels[i],0,0);ctx.restore()}else{ctx.fillText(data.labels[i],yAxisPosX+i*valueHop+valueHop/2,xAxisPosY+config.scaleFontSize+3)}ctx.beginPath();ctx.moveTo(yAxisPosX+(i+1)*valueHop,xAxisPosY+3);ctx.lineWidth=config.scaleGridLineWidth;ctx.strokeStyle=config.scaleGridLineColor;ctx.lineTo(yAxisPosX+(i+1)*valueHop,5);ctx.stroke()}ctx.lineWidth=config.scaleLineWidth;ctx.strokeStyle=config.scaleLineColor;ctx.beginPath();ctx.moveTo(yAxisPosX,xAxisPosY+5);ctx.lineTo(yAxisPosX,5);ctx.stroke();ctx.textAlign="right";ctx.textBaseline="middle";for(var j=0;j<calculatedScale.steps;j++){ctx.beginPath();ctx.moveTo(yAxisPosX-3,xAxisPosY-(j+1)*scaleHop);if(config.scaleShowGridLines){ctx.lineWidth=config.scaleGridLineWidth;ctx.strokeStyle=config.scaleGridLineColor;ctx.lineTo(yAxisPosX+xAxisLength+5,xAxisPosY-(j+1)*scaleHop)}else{ctx.lineTo(yAxisPosX-.5,xAxisPosY-(j+1)*scaleHop)}ctx.stroke();if(config.scaleShowLabels){ctx.fillText(calculatedScale.labels[j],yAxisPosX-8,xAxisPosY-(j+1)*scaleHop)}}}function calculateXAxisSize(){var longestText=1;if(config.scaleShowLabels){ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;for(var i=0;i<calculatedScale.labels.length;i++){var measuredText=ctx.measureText(calculatedScale.labels[i]).width;longestText=measuredText>longestText?measuredText:longestText}longestText+=10}xAxisLength=width-longestText-widestXLabel;valueHop=Math.floor(xAxisLength/data.labels.length);barWidth=(valueHop-config.scaleGridLineWidth*2-config.barValueSpacing*2-(config.barDatasetSpacing*data.datasets.length-1)-(config.barStrokeWidth/2*data.datasets.length-1))/data.datasets.length;yAxisPosX=width-widestXLabel/2-xAxisLength;xAxisPosY=scaleHeight+config.scaleFontSize/2}function calculateDrawingSizes(){maxSize=height;ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;widestXLabel=1;for(var i=0;i<data.labels.length;i++){var textLength=ctx.measureText(data.labels[i]).width;widestXLabel=textLength>widestXLabel?textLength:widestXLabel}if(width/data.labels.length<widestXLabel){rotateLabels=45;if(width/data.labels.length<Math.cos(rotateLabels)*widestXLabel){rotateLabels=90;maxSize-=widestXLabel}else{maxSize-=Math.sin(rotateLabels)*widestXLabel}}else{maxSize-=config.scaleFontSize}maxSize-=5;labelHeight=config.scaleFontSize;maxSize-=labelHeight;scaleHeight=maxSize}function getValueBounds(){var upperValue=Number.MIN_VALUE;var lowerValue=Number.MAX_VALUE;for(var i=0;i<data.datasets.length;i++){for(var j=0;j<data.datasets[i].data.length;j++){if(data.datasets[i].data[j]>upperValue){upperValue=data.datasets[i].data[j]}if(data.datasets[i].data[j]<lowerValue){lowerValue=data.datasets[i].data[j]}}}var maxSteps=Math.floor(scaleHeight/(labelHeight*.66));var minSteps=Math.floor(scaleHeight/labelHeight*.5);return{maxValue:upperValue,minValue:lowerValue,maxSteps:maxSteps,minSteps:minSteps}}};function calculateOffset(val,calculatedScale,scaleHop){var outerValue=calculatedScale.steps*calculatedScale.stepValue;var adjustedValue=val-calculatedScale.graphMin;var scalingFactor=CapValue(adjustedValue/outerValue,1,0);return scaleHop*calculatedScale.steps*scalingFactor}function animationLoop(config,drawScale,drawData,ctx){var animFrameAmount=config.animation?1/CapValue(config.animationSteps,Number.MAX_VALUE,1):1,easingFunction=animationOptions[config.animationEasing],percentAnimComplete=config.animation?0:1;if(typeof drawScale!=="function")drawScale=function(){};requestAnimFrame(animLoop);function animateFrame(){var easeAdjustedAnimationPercent=config.animation?CapValue(easingFunction(percentAnimComplete),null,0):1;clear(ctx);if(config.scaleOverlay){drawData(easeAdjustedAnimationPercent);drawScale()}else{drawScale();drawData(easeAdjustedAnimationPercent)}}function animLoop(){percentAnimComplete+=animFrameAmount;animateFrame();if(percentAnimComplete<=1){requestAnimFrame(animLoop)}else{if(typeof config.onAnimationComplete=="function")config.onAnimationComplete()}}}var requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}();function calculateScale(drawingHeight,maxSteps,minSteps,maxValue,minValue,labelTemplateString){var graphMin,graphMax,graphRange,stepValue,numberOfSteps,valueRange,rangeOrderOfMagnitude,decimalNum;valueRange=maxValue-minValue;rangeOrderOfMagnitude=calculateOrderOfMagnitude(valueRange);graphMin=Math.floor(minValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude);graphMax=Math.ceil(maxValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude);graphRange=graphMax-graphMin;stepValue=Math.pow(10,rangeOrderOfMagnitude);numberOfSteps=Math.round(graphRange/stepValue);while(numberOfSteps<minSteps||numberOfSteps>maxSteps){if(numberOfSteps<minSteps){stepValue/=2;numberOfSteps=Math.round(graphRange/stepValue)}else{stepValue*=2;numberOfSteps=Math.round(graphRange/stepValue)}}var labels=[];populateLabels(labelTemplateString,labels,numberOfSteps,graphMin,stepValue);return{steps:numberOfSteps,stepValue:stepValue,graphMin:graphMin,labels:labels};function calculateOrderOfMagnitude(val){return Math.floor(Math.log(val)/Math.LN10)
}}function populateLabels(labelTemplateString,labels,numberOfSteps,graphMin,stepValue){if(labelTemplateString){for(var i=1;i<numberOfSteps+1;i++){labels.push(tmpl(labelTemplateString,{value:(graphMin+stepValue*i).toFixed(getDecimalPlaces(stepValue))}))}}}function Max(array){return Math.max.apply(Math,array)}function Min(array){return Math.min.apply(Math,array)}function Default(userDeclared,valueIfFalse){if(!userDeclared){return valueIfFalse}else{return userDeclared}}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function CapValue(valueToCap,maxValue,minValue){if(isNumber(maxValue)){if(valueToCap>maxValue){return maxValue}}if(isNumber(minValue)){if(valueToCap<minValue){return minValue}}return valueToCap}function getDecimalPlaces(num){var numberOfDecimalPlaces;if(num%1!=0){return num.toString().split(".")[1].length}else{return 0}}function mergeChartConfig(defaults,userDefined){var returnObj={};for(var attrname in defaults){returnObj[attrname]=defaults[attrname]}for(var attrname in userDefined){returnObj[attrname]=userDefined[attrname]}return returnObj}var cache={};function tmpl(str,data){var fn=!/\W/.test(str)?cache[str]=cache[str]||tmpl(document.getElementById(str).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+str.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return data?fn(data):fn}};